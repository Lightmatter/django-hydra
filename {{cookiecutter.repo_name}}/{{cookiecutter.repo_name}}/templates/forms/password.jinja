{% from 'forms/attrs.jinja' import form_attrs %}

{% macro password(name='password', value=None, model="password", attrs={}) %}
{% do attrs.pop('placeholder', '') %} {# default design doesn't allow for placeholder text, uses labels instead #}
<span x-data="{input: 'password'}" class="relative">
    <input :type="input"
           name="{{ name }}"
           x-model="{{ model }}"
           {% if value != None %} value="{{ value }}"{% endif %}
           {{form_attrs(attrs)}}>
    <div class="absolute inset-y-0 right-0 pr-9 flex items-center cursor-pointer"
         @click="input='password'"
         x-cloak
         x-show="input==='text'">
        {{ heroicon_outline("eye-off", class="w-6 h-6") }}
    </div>
    <div class="absolute inset-y-0 right-0 pr-9 flex items-center cursor-pointer"
         @click="input='text'"
         x-show="input==='password'">
        {{ heroicon_outline("eye", class="w-6 h-6") }}
    </div>
</span>
{% endmacro %}

{% macro widget_to_password(widget) %}
    {{password(name=widget.name, value=widget.value, model=widget.attrs.id, attrs=widget.attrs )}}
{% endmacro %}
