{% from 'components/util.jinja' import attributes, get_event_name_from_id %}
{% macro password_field(field, errors) %}
    {{ password_widget(field.field.widget, value=field.value(), id=field.id_for_label, name=field.name)}}
{% endmacro %}

{% macro password_widget(widget, value=none, id="", name="") %}
    {% set event_name = get_event_name_from_id(id) %}
    <div
        x-data="password('{{ event_name }}', '{{ value }}', 'password')"
        x-ref="input"
        :class="active ? 'has-focus' : ''"
        class="w-full z-10 flex items-center relative password"
    >
        <input x-model.debounce.500ms="value" :type="type" class="mr-8" value="{{ value or ""}}" {{ attributes(widget.attrs)}} />
        <div class="absolute inset-y-0 right-4 flex items-center cursor-pointer"
             @click="type='password'"
             x-cloak
             x-show="type==='text'">
            {{ heroicon_outline("eye-slash", class="w-6 h-6") }}
        </div>
        <div class="absolute inset-y-0 right-4 flex items-center cursor-pointer"
             @click="type='text'"
             x-show="type==='password'">
            {{ heroicon_outline("eye", class="w-6 h-6") }}
        </div>
    </div>
{% endmacro %}
